import{_ as W,r,q as X,aG as H,n as J,a5 as Q,a7 as Y,W as Z,X as ee,A as te,B as le,aM as ae,ab as ne,ac as oe,C as de,as as re,aD as se,f as T,j as e,k as t,w as ue,y as v,z as V,o as p,g as B,N as ie,h as d,U as pe,V as _e,m as _,aL as ce,R as me,E as k,aK as fe}from"./vendor.3587a8c4.js";/* empty css                   *//* empty css                        */import{l as ve,g as ge,u as he,a as be,d as xe}from"./dept.6045f47f.js";import{b as Ee}from"./index.f1e71e2e.js";const Ve={class:"app-container"},ke=_("\u5C55\u5F00/\u6298\u53E0"),Ne=_("\u4FEE\u6539"),ye=_("\u65B0\u589E"),Ce=_("\u5220\u9664"),we={class:"dialog-footer"},De=_("\u786E \u5B9A"),Ie=_("\u53D6 \u6D88"),Te={setup(Be){const N=r([]),s=r(!1),g=r(!0);r(!0);const h=r("");r([]);const b=r(!0),x=r(!0),y=r([]),U=X({form:{},rules:{parentId:[{required:!0,message:"\u4E0A\u7EA7\u90E8\u95E8\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],deptName:[{required:!0,message:"\u90E8\u95E8\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],orderNum:[{required:!0,message:"\u663E\u793A\u6392\u5E8F\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],leader_id:[{required:!0,message:"\u8D1F\u8D23\u4EBA\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],phone:[{required:!0,pattern:/^1[3|4|5|6|7|8|9][0-9]\d{8}$/,message:"\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u624B\u673A\u53F7\u7801",trigger:"blur"}]}}),{proxy:C}=ce(),{form:n,rules:j}=H(U);function m(){g.value=!0,ve().then(o=>{N.value=C.handleTree(o.data,"_id"),g.value=!1})}function q(){s.value=!1,E()}function E(){n.value={_id:void 0,parentId:void 0,deptName:void 0,orderNum:0,leader_id:void 0,phone:void 0}}function L(o){E(),o!=null&&(n.value.parentId=o._id),s.value=!0,h.value="\u6DFB\u52A0\u90E8\u95E8"}function R(){x.value=!1,b.value=!b.value,me(()=>{x.value=!0})}function $(o){E(),ge(o._id).then(a=>{n.value=a.data,s.value=!0,h.value="\u4FEE\u6539\u90E8\u95E8"})}function A(){C.$refs.deptRef.validate(o=>{o&&(n.value._id!=null?he(n.value).then(a=>{k.success("\u4FEE\u6539\u6210\u529F"),s.value=!1,m()}):be(n.value).then(a=>{k.success("\u65B0\u589E\u6210\u529F"),s.value=!1,m()}))})}function F(o){fe.confirm('\u662F\u5426\u786E\u8BA4\u5220\u9664\u540D\u79F0\u4E3A"'+o.deptName+'"\u7684\u6570\u636E\u9879?',"\u7CFB\u7EDF\u63D0\u793A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(function(){return xe(o._id)}).then(()=>{m(),k.success("\u5220\u9664\u6210\u529F")}).catch(()=>{})}return m(),Ee().then(o=>{o.data.forEach(a=>{y.value.push({label:a.name,value:a._id})})}),(o,a)=>{const u=J,c=Q,w=Y,i=Z,M=ee,D=te,f=le,S=ae,O=ne,z=oe,G=de,K=re,P=se;return p(),T("div",Ve,[e(w,{gutter:10,class:"mb8"},{default:t(()=>[e(c,{span:1.5},{default:t(()=>[e(u,{type:"info",plain:"",icon:"Sort",onClick:R},{default:t(()=>[ke]),_:1})]),_:1},8,["span"])]),_:1}),x.value?ue((p(),v(M,{key:0,data:N.value,"row-key":"_id","default-expand-all":b.value,"tree-props":{children:"children",hasChildren:"hasChildren"}},{default:t(()=>[e(i,{prop:"deptName",label:"\u90E8\u95E8\u540D\u79F0"}),e(i,{prop:"orderNum",label:"\u6392\u5E8F"}),e(i,{prop:"leader_name",label:"\u8D1F\u8D23\u4EBA"}),e(i,{prop:"phone",label:"\u90E8\u95E8\u7535\u8BDD"}),e(i,{label:"\u521B\u5EFA\u65F6\u95F4",align:"center",prop:"createTime"},{default:t(l=>[B("span",null,ie(l.row.createTime),1)]),_:1}),e(i,{label:"\u64CD\u4F5C",align:"center","class-name":"small-padding fixed-width"},{default:t(l=>[l.row.parentId?(p(),v(u,{key:0,type:"text",icon:"Edit",onClick:I=>$(l.row)},{default:t(()=>[Ne]),_:2},1032,["onClick"])):V("",!0),e(u,{type:"text",icon:"Plus",onClick:I=>L(l.row)},{default:t(()=>[ye]),_:2},1032,["onClick"]),l.row.parentId?(p(),v(u,{key:1,type:"text",icon:"Delete",onClick:I=>F(l.row)},{default:t(()=>[Ce]),_:2},1032,["onClick"])):V("",!0)]),_:1})]),_:1},8,["data","default-expand-all"])),[[P,g.value]]):V("",!0),e(K,{title:h.value,modelValue:s.value,"onUpdate:modelValue":a[4]||(a[4]=l=>s.value=l),width:"600px","append-to-body":""},{footer:t(()=>[B("div",we,[e(u,{type:"primary",onClick:A},{default:t(()=>[De]),_:1}),e(u,{onClick:q},{default:t(()=>[Ie]),_:1})])]),default:t(()=>[e(G,{ref:"deptRef",model:d(n),rules:d(j),"label-width":"80px"},{default:t(()=>[e(w,null,{default:t(()=>[e(c,{span:12},{default:t(()=>[e(f,{label:"\u90E8\u95E8\u540D\u79F0",prop:"deptName"},{default:t(()=>[e(D,{modelValue:d(n).deptName,"onUpdate:modelValue":a[0]||(a[0]=l=>d(n).deptName=l),placeholder:"\u8BF7\u8F93\u5165\u90E8\u95E8\u540D\u79F0"},null,8,["modelValue"])]),_:1})]),_:1}),e(c,{span:12},{default:t(()=>[e(f,{label:"\u663E\u793A\u6392\u5E8F",prop:"orderNum"},{default:t(()=>[e(S,{modelValue:d(n).orderNum,"onUpdate:modelValue":a[1]||(a[1]=l=>d(n).orderNum=l),"controls-position":"right",min:0},null,8,["modelValue"])]),_:1})]),_:1}),e(c,{span:12},{default:t(()=>[e(f,{label:"\u8D1F\u8D23\u4EBA",prop:"leader_id"},{default:t(()=>[e(z,{modelValue:d(n).leader_id,"onUpdate:modelValue":a[2]||(a[2]=l=>d(n).leader_id=l),placeholder:"\u8BF7\u9009\u62E9"},{default:t(()=>[(p(!0),T(pe,null,_e(y.value,l=>(p(),v(O,{key:l._id,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(c,{span:12},{default:t(()=>[e(f,{label:"\u8054\u7CFB\u7535\u8BDD",prop:"phone"},{default:t(()=>[e(D,{modelValue:d(n).phone,"onUpdate:modelValue":a[3]||(a[3]=l=>d(n).phone=l),placeholder:"\u8BF7\u8F93\u5165\u90E8\u95E8\u7535\u8BDD",maxlength:"11"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"])])}}};var $e=W(Te,[["__scopeId","data-v-e063fed2"]]);export{$e as default};
